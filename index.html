<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>M4trix Sh00t3r</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23020704' width='100' height='100'/><text y='75' x='15' font-size='70' fill='%2300ff9a'>M</text></svg>">
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  </head>
  <body>
    <div class="hud">
      <div class="title">M4trix Sh00t3r</div>
      <div class="stats">
        <span id="score">Score: 0</span>
        <span id="combo">Combo: x1</span>
        <span id="lives">Lives: 3</span>
        <span id="level">Level: 1</span>
        <span id="weapon">Weapon: Blaster</span>
        <span id="buffs">Powerups: -</span>
        <span id="ai">AI: Off</span>
        <span id="ai-lives">AI Lives: -</span>
      </div>
      <div class="help">
        P1: WASD + Space ‚Ä¢ P2: Arrows + Enter ‚Ä¢ Weapons: 1-4 ‚Ä¢ Pause: P ‚Ä¢ Shop: B ‚Ä¢ AI: I
      </div>
      <div id="p2-stats" class="p2-stats hidden">
        <span id="p2-lives">P2 Lives: 3</span>
      </div>
    </div>
    <div id="boss-hp-bar" class="boss-hp hidden">
      <div class="boss-hp-label">BOSS</div>
      <div class="boss-hp-track"><div id="boss-hp-fill" class="boss-hp-fill"></div></div>
      <div id="boss-phase" class="boss-phase">Phase 1</div>
    </div>
    <canvas id="game"></canvas>

    <!-- Touch Controls -->
    <div id="touch-controls" class="touch-controls">
      <!-- Virtual Joystick -->
      <div id="joystick-zone" class="joystick-zone">
        <div id="joystick-base" class="joystick-base">
          <div id="joystick-stick" class="joystick-stick"></div>
        </div>
      </div>
      <!-- Action Buttons -->
      <div class="touch-action-zone">
        <div id="touch-fire" class="touch-btn touch-fire">üî•</div>
        <div id="touch-weapon" class="touch-btn touch-weapon">‚öî</div>
        <div id="touch-nuke" class="touch-btn touch-nuke">‚ò¢</div>
      </div>
    </div>

    <!-- Floating Admin Button (always visible during game) -->
    <div id="admin-floating-btn" class="admin-floating-btn hidden">‚öô</div>

    <!-- Main Menu -->
    <div id="menu" class="overlay">
      <div class="panel menu-panel">
        <div class="panel-title glitch" data-text="M4TRIX SH00T3R">M4TRIX SH00T3R</div>
        <div class="panel-text">
          A cyberpunk shooter experience.<br/>
          Survive the digital storm.
        </div>
        <div class="menu-buttons">
          <button id="start-btn" class="btn btn-large">‚ñ∫ START GAME</button>
          <button id="multiplayer-btn" class="btn btn-large">üë• LOCAL MULTIPLAYER</button>
          <button id="online-btn" class="btn btn-large">üåê ONLINE LOBBY</button>
          <button id="story-btn" class="btn">üìñ STORY MODE</button>
          <button id="achievements-btn" class="btn">üèÜ ACHIEVEMENTS</button>
          <button id="highscore-btn" class="btn">üìä HIGHSCORES</button>
          <button id="admin-btn" class="btn">‚öô ADMIN PANEL</button>
        </div>
      </div>
    </div>

    <!-- Story/Cutscene Overlay -->
    <div id="story" class="overlay hidden">
      <div class="panel story-panel">
        <div id="story-title" class="story-title">CHAPTER 1</div>
        <div id="story-text" class="story-text typewriter"></div>
        <div id="story-speaker" class="story-speaker"></div>
        <button id="story-next" class="btn">CONTINUE ‚ñ∫</button>
        <button id="story-skip" class="btn btn-small">SKIP</button>
      </div>
    </div>

    <!-- Upgrade Shop -->
    <div id="shop" class="overlay hidden">
      <div class="panel shop-panel">
        <div class="panel-title">‚ö° UPGRADE SHOP ‚ö°</div>
        <div id="shop-credits" class="shop-credits">Credits: 0</div>
        <div class="shop-grid" id="shop-grid"></div>
        <div class="admin-actions">
          <button id="shop-close" class="btn">CONTINUE ‚ñ∫</button>
        </div>
      </div>
    </div>

    <!-- Achievements -->
    <div id="achievements" class="overlay hidden">
      <div class="panel achievements-panel">
        <div class="panel-title">üèÜ ACHIEVEMENTS</div>
        <div id="achievements-list" class="achievements-list"></div>
        <div class="admin-actions">
          <button id="achievements-close" class="btn">CLOSE</button>
        </div>
      </div>
    </div>

    <!-- Highscores -->
    <div id="highscores" class="overlay hidden">
      <div class="panel">
        <div class="panel-title">üìä HIGHSCORES</div>
        <div id="highscore-list" class="highscore-list"></div>
        <div class="admin-actions">
          <button id="highscore-close" class="btn">CLOSE</button>
        </div>
      </div>
    </div>

    <!-- Level Complete -->
    <div id="level-complete" class="overlay hidden">
      <div class="panel">
        <div class="panel-title">LEVEL COMPLETE!</div>
        <div id="level-stats" class="level-stats"></div>
        <div class="admin-actions">
          <button id="level-shop" class="btn btn-large">OPEN SHOP</button>
          <button id="level-continue" class="btn">CONTINUE ‚ñ∫</button>
        </div>
      </div>
    </div>

    <!-- Admin Panel - SUPER POWERFUL -->
    <div id="admin" class="overlay hidden">
      <div class="panel admin-panel-mega">
        <div class="panel-title">üîß ADMIN PANEL üîß</div>
        
        <!-- Quick Actions -->
        <div class="admin-section">
          <div class="admin-section-title">‚ö° QUICK ACTIONS</div>
          <div class="admin-buttons">
            <button id="admin-godmode" class="btn admin-btn-special">üõ°Ô∏è GOD MODE</button>
            <button id="admin-nuke-now" class="btn admin-btn-special">‚ò¢Ô∏è NUKE NOW</button>
            <button id="admin-spawn-boss" class="btn admin-btn-special">üëπ SPAWN BOSS</button>
            <button id="admin-kill-all" class="btn admin-btn-special">üíÄ KILL ALL</button>
            <button id="admin-max-powerups" class="btn admin-btn-special">üåü MAX POWERUPS</button>
            <button id="admin-unlock-all" class="btn admin-btn-special">üîì UNLOCK ALL</button>
            <button id="admin-add-credits" class="btn admin-btn-special">üí∞ +1000 CREDITS</button>
            <button id="admin-next-level" class="btn admin-btn-special">‚¨ÜÔ∏è NEXT LEVEL</button>
          </div>
        </div>

        <!-- Player Stats -->
        <div class="admin-section">
          <div class="admin-section-title">üë§ PLAYER</div>
          <div class="admin-grid">
            <label>Lives <input id="admin-lives" type="number" min="0" value="3" /></label>
            <label>Score <input id="admin-score" type="number" min="0" value="0" /></label>
            <label>Credits <input id="admin-credits" type="number" min="0" value="0" /></label>
            <label>Level <input id="admin-level" type="number" min="1" value="1" /></label>
            <label>Speed <input id="admin-playerspeed" type="number" min="50" max="1000" value="280" /></label>
            <label>Damage Multi <input id="admin-damage" type="number" step="0.1" min="0.1" max="10" value="1" /></label>
            <label>Invincible <input id="admin-invincible" type="checkbox" /></label>
            <label>Infinite Ammo <input id="admin-infiniteammo" type="checkbox" /></label>
          </div>
        </div>

        <!-- Weapons & Powerups -->
        <div class="admin-section">
          <div class="admin-section-title">üî´ WEAPONS & POWERUPS</div>
          <div class="admin-grid">
            <label>Weapon (1-4) <input id="admin-weapon" type="number" min="1" max="4" value="1" /></label>
            <label>Rapid Level <input id="admin-rapidlevel" type="number" min="0" max="20" value="0" /></label>
            <label>Rapid Time <input id="admin-rapidtime" type="number" min="0" value="0" /></label>
            <label>Shield Time <input id="admin-shieldtime" type="number" min="0" value="0" /></label>
            <label>Speed Time <input id="admin-speedtime" type="number" min="0" value="0" /></label>
            <label>Spread Time <input id="admin-spreadtime" type="number" min="0" value="0" /></label>
            <label>Nuke Cooldown <input id="admin-nukecooldown" type="number" min="0" value="0" /></label>
            <label>Combo <input id="admin-combo" type="number" min="0" value="0" /></label>
          </div>
        </div>

        <!-- Enemy Settings -->
        <div class="admin-section">
          <div class="admin-section-title">üëæ ENEMIES</div>
          <div class="admin-grid">
            <label>Spawn Interval <input id="admin-spawn" type="number" step="0.1" min="0.1" value="1.2" /></label>
            <label>Enemy Speed Multi <input id="admin-enemyspeed" type="number" step="0.1" min="0.1" max="5" value="1" /></label>
            <label>Enemy HP Multi <input id="admin-enemyhp" type="number" step="0.1" min="0.1" max="5" value="1" /></label>
            <label>Spawn Enemies <input id="admin-spawning" type="checkbox" checked /></label>
          </div>
        </div>

        <!-- AI Settings -->
        <div class="admin-section">
          <div class="admin-section-title">ü§ñ AI HELPER</div>
          <div class="admin-grid">
            <label>AI Enabled <input id="admin-ai" type="checkbox" /></label>
            <label>AI Lives <input id="admin-ailives" type="number" min="0" value="3" /></label>
            <label>AI Unlock Level <input id="admin-aiunlock" type="number" min="1" value="2" /></label>
            <label>AI Damage <input id="admin-aidamage" type="number" step="0.1" min="0.1" max="10" value="1" /></label>
          </div>
        </div>

        <!-- Multiplayer -->
        <div class="admin-section">
          <div class="admin-section-title">üë• MULTIPLAYER</div>
          <div class="admin-grid">
            <label>P2 Lives <input id="admin-p2lives" type="number" min="0" value="3" /></label>
            <label>P2 Active <input id="admin-p2active" type="checkbox" /></label>
            <label>P2 Invincible <input id="admin-p2invincible" type="checkbox" /></label>
          </div>
        </div>

        <!-- Audio & Spawn Rates -->
        <div class="admin-section">
          <div class="admin-section-title">üîä AUDIO & SPAWN RATES</div>
          <div class="admin-grid">
            <label>SFX Volume <input id="admin-sfx" type="number" step="0.05" min="0" max="1" value="1" /></label>
            <label>BGM Volume <input id="admin-bgm" type="number" step="0.05" min="0" max="1" value="1" /></label>
            <label>Life % <input id="admin-life" type="number" min="0" max="100" value="20" /></label>
            <label>Speed % <input id="admin-speed" type="number" min="0" max="100" value="10" /></label>
            <label>Rapid % <input id="admin-rapid" type="number" min="0" max="100" value="60" /></label>
            <label>Shield % <input id="admin-shield" type="number" min="0" max="100" value="10" /></label>
            <label>Spread % <input id="admin-spread" type="number" min="0" max="100" value="0" /></label>
          </div>
        </div>

        <div class="admin-actions">
          <button id="admin-apply" class="btn btn-large">‚úÖ APPLY</button>
          <button id="admin-close" class="btn">‚ùå CLOSE</button>
          <button id="admin-reset" class="btn" style="background:#ff2255;">üóëÔ∏è RESET ALL</button>
        </div>
      </div>
    </div>

    <!-- Pause/Game Over -->
    <div id="overlay" class="overlay hidden">
      <div class="panel">
        <div id="overlay-title">Paused</div>
        <div id="overlay-subtitle">Press P to continue</div>
        <div id="overlay-buttons" class="menu-buttons">
          <button id="resume-btn" class="btn btn-large hidden">‚ñ∂ RESUME</button>
          <button id="restart-btn" class="btn btn-large hidden">üîÑ RESTART</button>
          <button id="shop-overlay-btn" class="btn">üõí SHOP</button>
          <button id="admin-overlay-btn" class="btn">‚öô ADMIN</button>
          <button id="menu-btn" class="btn">‚óÄ MAIN MENU</button>
        </div>
      </div>
    </div>

    <!-- Achievement Popup -->
    <div id="achievement-popup" class="achievement-popup hidden">
      <div class="achievement-icon">üèÜ</div>
      <div class="achievement-info">
        <div id="achievement-name" class="achievement-name"></div>
        <div id="achievement-desc" class="achievement-desc"></div>
      </div>
    </div>

    <!-- Online Lobby -->
    <div id="lobby" class="overlay hidden">
      <div class="panel lobby-panel">
        <div class="panel-title">üåê ONLINE LOBBY</div>
        <div id="lobby-status" class="lobby-status">Connecting to network...</div>
        
        <div id="lobby-menu" class="lobby-menu hidden">
          <button id="lobby-create" class="btn btn-large">üè† CREATE LOBBY</button>
          <button id="lobby-join" class="btn btn-large">üö™ JOIN LOBBY</button>
          <button id="lobby-back" class="btn">‚Üê BACK TO MENU</button>
        </div>
        
        <div id="lobby-host" class="lobby-host hidden">
          <div class="lobby-code-label">YOUR LOBBY CODE:</div>
          <div id="lobby-code" class="lobby-code">------</div>
          <div class="lobby-hint">Share this code with your friend!</div>
          <div id="lobby-players" class="lobby-players">
            <div class="lobby-player you">üë§ YOU (Host)</div>
            <div id="lobby-guest" class="lobby-player waiting">‚è≥ Waiting for player...</div>
          </div>
          <button id="lobby-start-game" class="btn btn-large" disabled>‚ñ∂ START GAME</button>
          <button id="lobby-cancel-host" class="btn">CANCEL</button>
        </div>
        
        <div id="lobby-join-form" class="lobby-join-form hidden">
          <div class="lobby-code-label">ENTER LOBBY CODE:</div>
          <input id="lobby-code-input" type="text" maxlength="6" placeholder="XXXXXX" class="lobby-input" />
          <button id="lobby-connect" class="btn btn-large">üîó CONNECT</button>
          <button id="lobby-cancel-join" class="btn">CANCEL</button>
        </div>
        
        <div id="lobby-waiting" class="lobby-waiting hidden">
          <div class="lobby-code-label">CONNECTED TO LOBBY!</div>
          <div class="lobby-players">
            <div id="lobby-host-name" class="lobby-player">üë§ Host</div>
            <div class="lobby-player you">üë§ YOU (Guest)</div>
          </div>
          <div class="lobby-hint">Waiting for host to start...</div>
          <button id="lobby-leave" class="btn">LEAVE LOBBY</button>
        </div>
      </div>
    </div>

    <!-- Connection Status -->
    <div id="connection-status" class="connection-status hidden">
      <span id="connection-text">üîó Connected</span>
    </div>

    <script src="game.js"></script>
  </body>
</html>
